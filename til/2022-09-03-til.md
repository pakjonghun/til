---
date: 2022-09-03
category: til
---

## 함수형코딩 책을 읽으며

- 책에 대한 생각은 대 만 족
  - 지인에게 추천을 받은 책이라서 호기심에 책을 구매해서 읽기 시작했다.
  - 개발 학습을 시작하고 처음 개발 관련 도서를 읽어 본 것이라서
  - 책 내용에 대한 기대 반, 내용이 별 도움이 안될 것이라는 걱정 반 이었다.
  - 지금 책의 1/10 정도 읽었는데 책에 대한 생각은 매우 만족이다.
- 쪼개로 나누고 분류하고
  - 책에서 필자는 함수형 코딩을 효율적으로 하는 방법에 대해서 알려주고 있다.
  - 더 세부적으로 말하면 생각나는대로 즉흥적으로 짠 코드를(작동은함)
  - 함수 레벨별(함수가 제공된 함수인지 만든 것인지 계산인지에 따라 구분) 계층과 데이터 순수함수 사이드이펙트로 나누어 체계적으로 작성한 코드 로 조금씩 바꿔가면서
  - 어떤점이 좋고 왜 이렇게 해야 하는지 알려주고 있다.
  - 코드를 자꾸 나눈다. 단순한 반복문, 단순한 입출력도
  - 전부 나누어서 따져본다.
  - 이를테면 array[i] 라는 간단한 부분도 setArray(idx,array) 이런식으로 나눈다.
  - 그래서 새로운 순수함수(책에서는 계산이라고 함)를 만들고
  - 독립된 계산을 통해 테스트와 재활용성을 높인다.
- 데이터 > 계산 > 액션(사이드이펙트)

  - 나눈 함수는 나누기 전 계산을 위한 것인지 액션을 위한 것인지
  - 고민하고 나누어야 한다.
  - 계산을 많이 나누어서 만들어 놓는것이 좋다고 하며
  - 계산의 특징은 외부과 단절 하는 것이므로(입력이 같으면 출력도 항상 같아야함)

- 액션의 특징

  - 액션은 없을 수 없다. 꼭 있을 수 밖에 없다.
  - 하지만 작게 줄이고, 적게 만들고, 계산을 많이 만들고, 실행 시점 순서에 영향을 미치지 않도록 제한 시킬 수 있다.
  - 그러려면 일단 액션을 구분 해야 하는데 액션은!
  - 암묵적 입출력이 있으면 액션이 된다.
  - 액션은! 함수에 액션이 들어있으면 그 함수 전체가 나아가 그 함수를 사용하는 다른함수도 액션이 된다.
  - 즉 액션을 분리하지 않으면 거의 대부분의 코드에 액션이 전염된다.

- 불변성

  - 검증된 코드 는 카피 온 라이트(얕은복사)를 사용하고
  - 검증되지 않은 코드의 소스는 방어적 복사(깊은복사)를 한다
  - 얕은 복사 내에 있는 참조변수를 또 바꿔야 하면 순회하는 도중에
  - 다시 얕은 복사를 한다.
  - 즉 바뀌는 부분만 복사를 계속 하므로 생각보다 복사 하는데 비용이 크지 않으며
  - js 에서 참조 연결이 다 끊기면 알아서 메모리에서 변수를 제거하는 가비지 컬렉터가 성능이 많이 좋아져서
  - 비용 걱정은 크게 안해도 된다고 한다.
  - 나는 이제까지 불변성을 지키는 이유가
  - 단순히 비교기준이 유지되게 하기 위한것이라고 생각을 했는데
  - 재활용성 테스트 협업하기 좋은 코드 작성 및 코드 검증 등 의 중요한 이유가 있다는 것을 알 수 있었다.

- 설계 그리고 감각

  - 지금 읽는 파트는 설계 부분이다
  - 언어에서 제공하는 기능(map, slice, split 등등)
  - 계산(순수함수)
  - 비지니스 로직(그 기능에서 개발자가 작성한 핵심 로직)
  - 액션(사이드이팩트)
  - 위 4가지 책에서는 3가지를 들었는데 실제로는 더 많이 나눌 수도 있다고 생각한다.
  - 위 4가지를 계층별로 나누어 알아보기 쉬운 코드를 짜는 방법을 읽고 있다.
  - 방법이 구체적이고 명확하지가 않은데 그 이유는 설계자체가
  - 매우 감각적이고 복잡한 내용이기 때문이라고 한다.
  - 많이 해 봐서 설계에 노출이 되고 개인 노력과 운에 따라 감각이 익혀진다고
  - 책에서 설명 하고 있다.
  - 그리고 감각을 기르기 위한 단계로 즉흥적인 코딩이 아닌
  - 기능별 다이어그램을 적어보고 코드 작성을 시작 해 보라고 권하고 있다.

- 배운 것을 활용

  - 알고리즘 프로그래머스 3단계는 문제 접근 차제가 오래 걸린다
  - 아직 내 수준으로는 문제를 이해 하는 것에서 부터 오래 걸리고
  - 문제접근 방법을 결정 하는 것에서 엄청 헤매다가
  - 근근히 1문제씩 푸는 식이다.
  - 그래서 오랜만에 백준 사이트에 들어가서 문제를 풀기 시작했다
  - 난이도 별로 입출력 사칙연산 부터 풀면서
  - 간단한 기능이라도 책에서 말한대로 다 쪼개고 나누고 또
  - 계층도 생각하는 대로 나누어서 풀고 있다.
  - 역시나.. 아직 많이 부족하다 코드를 보니 또 고칠 부분이 보인다.

    ```
      //필요한 데이터 계층
      const origin = [1, 1, 2, 2, 2, 8];
      const answer = [];

      //계산 함수 계층
      function getNthElem(i, array) {
        return array[i];
      }

      function setAnswer(i, answerItem, answer) {
        //이건 액션이다. 카피 온 라이트를 적용해야 하지만 여기서는 굳이 필요가 없어서 이렇게 작성했다.
        answer[i] = answerItem;
      }

      //비지니스 로직 이 부분도 함수로 만들어서 인자를 넣고 결과 를 반환 받아야 맞다고 생각함
      for (let i = 0; i < origin.length; i++) {
        setAnswer(i, getNthElem(i, origin) - getNthElem(i, input), answer);
      }
    ```

- 꾸준히 독서를
  - 독서는 필자의 소중한 경험을 넣어 놓은 지식의 창고라고 생각한다.
  - 그 지식을 조금이라도 이해 한다면 그리고 내것으로 체득 할 수 있다면
  - 개인적인 발전에 엄청난 도움이 될 것이라고 생각한다.
  - google, 인강 등에 의존하며 검증되지 않은 지식 속에서 헤매다가
  - 책을 통해서 검증된 지식을 보게 되니
  - 새롭게 눈이 뜨이는 기분이다.
  - 꾸준히 개발 도서를 읽고 적용하려고 노력해야 겠다.
