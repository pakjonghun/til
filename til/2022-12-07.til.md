---
date: 2022-12-07
category: til, refactory
---

## refactory 책 챕터 1을 읽다.

- 리팩토링이란?
  - 유지보수가 쉽게 하기 위해 코드 구조 아키텍쳐를 개선하는 일이다.
    - 리팩토링을 해서 성능이 개선될 수도 있지만 성능개선이 목적이 아니다.
  - 오직 코드 구조를 바꾸는 일만 해야 한다.
  - 버그를 발견했다고 해서 고치거나
  - 기능을 추가하거나
  - 디팬던시의 버전을 업그레이드 하거나 하면안된다.
  - 발견한 버그 추가 기능 버전업글 같은 것들은 리팩토링 외 작업으로 따로 해야 한다.
- 왜 리팩토링을 하는가?
  - 유지보수를 쉽게하기 위해서 즉 짧은 시간에 더 많은 작업을 하기 위해서다.
  - 또 협업을 위해서 다른사람이 이해하기 쉽게 하기 위해서이기도 하다.
  - 코드 구조가 중복이 없고, 간결하고, 기능추가나 변경이 쉽게 작성되있기 때문이다.
  - 단 앞에 강조했다시피 절대로 코드구조만 바꿔야 하며, 기능추가, 버그수정 같은 일을 하면안된다.
- 리팩토링 시기는
  - 수시로 해야 한다.
  - 단 처음부터 하기에는 무리가 있고,
  - 3번이상 같거나 비슷한 코드를 작성하고 있다면, 시작하는 것이 좋다.

## 기억나는 핵심 내용

- well-designed vs bad-designed 을 분석한 그래프
  - 기능추가 속도 : 처음에는 well 이 느리지만 몇주안에 bad 를 뛰어넘는다. 반면 bad 는 계속 느려지다가 평행선을 그린다.
- 선행조건
  - 완벽한 코드는 없다는 것을 인정한다.(어처피 리팩토링 해야하고 문제점은 하나씩 갖고 있거나 나중에 생긴다)
  - 리팩토링은 전 후 작동이 동일해야 한다.
    - 작동을 확인 할 수 있는 테스트코드가 동일하게 작동해야 하므로 테스트코드가 리팩토링 전에 꼭 작성되어 있어야 한다.
    - 테스트코드를 작성하기 쉽게 최소한의 깨끗한 코드로 작성을 하되 오버하지 않고, 적당한 선을 지키면서 작성하는 것이 중요하다.
  - 테스트코드가 없는 레거시 코드의 경우도 마찬가지로 테스트코드를 임시로 작성하거나
    - 상황을 고려해서(시간 없으면 못하는거고..) 테스트코드를 작성해야 한다.
    - 레거시코드를 핸들링 하며 리팩토링 하는 방법은 다양한 패턴이 있는것 같은데 차후 알아봐야 함.
- 주의사항
  - 버그수정, 기능추가, 버전업 금지
  - 버전업을 한 후 리팩토링을 하거나, 버그수정후 리팩토링, 기능추가 후 리팩토링을 하는 방식으로 분리한다.
  - 오직 유지보수가 용이하게 코드 구조를 바꾸는 일 중복 제거 및 고유의 단일 원칙을 지키는데 초점을 두고 진행한다.
